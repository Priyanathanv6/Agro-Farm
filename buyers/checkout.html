<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agricultural Decision Support Management System</title>
  <link rel="shortcut icon" href="../images/logo.jpg" type="image/x-icon">
  <link rel="stylesheet" href="../style.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    crossorigin="anonymous"
  />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"  crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</head>

<body>
<nav class="navbar">
  <div class="container">
    <h1 class="logo">AgriðŸŒ±</h1>
  <div class="navbar-links" id="navbar-links">
      <p><a href="../index.html">Home</a></p> 
    <p><a href="../farmar.html">Farmer</a></p> 
    <p><a href="../buyer.html">Buyer</a></p> 
    <p><a href="../agriculturists.html">Agriculturists</a></p>
    <p><a href="../contact.html">Contact US</a></p>
  </div>
  <div class="menu-toggle" id="menu-toggle">
    <i class="fas fa-bars"></i>
  </div>
  </div>
</nav>
<div id="message-box" class="message-box" style="display: none;"></div>

  <section class="agristsec1">
      <div class="container">
          <div class="row">
            <div class="col-md-12">
                <div class="checkout-container">
                        <form id="secureCheckoutForm" class="secure-checkout-form">
                            <h3 style="margin-top: 100px;text-align: center;font-weight: 700;">Checkout Form</h3>


                        <form id="checkout-form">
                            
                            <!-- Shipping Details -->
                            <div class="form-group">
                            <label for="fullName">Full Name </label>
                            <input type="text" id="fullName" required>
                            </div>


                            <div class="form-group">
                            <label for="phone">Phone Number </label>
                            <input type="text" id="phone" pattern="\d{10}" required>
                            </div>


                            <div class="form-group">
                            <label for="address">Address </label>
                            <input type="text" id="address" required>
                            </div>

                        

                            <div class="form-group">
                            <label for="pincode">Pincode </label>
                            <input type="text" id="pincode" pattern="\d{6}" required>


                        <div class="order-summary" style="font-weight: 600;margin-bottom: 5px;" >Order Summary</div> <!-- Order summary will be injected here -->
                        <div class="form-group">
                            <label for="paymentMethod">Choose Payment Method *</label>
                            <select id="paymentMethod" required>
                                <option value="">Select</option>
                                <option value="credit">Credit Card</option>
                                <option value="debit">Debit Card</option>
                                <option value="upi">UPI</option>
                                <option value="netbanking">Net Banking</option>
                                <option value="cod">Cash on Delivery</option>
                            </select>
                            </div>

                            <div id="payment-details"></div> <!-- Dynamic payment fields will appear here -->

                            <button type="submit" class="pay-btn">Pay Now</button>
                        </div>
                        </form>
            </div>
          </div>
        </div>
    </section>




  <footer class="footer">
      <div class="container ">
          <div class="row line">
            <div class="col-md-4">
                <h2 class="Aogo">
                      <a  href="index.html">Agrow<span class="sub-color">farm</span></a>
                  </h2>
            </div>
            <div class="col-md-8">
                <div class="socillink">
                   <ul>
                          <li class="w3follow">Follows On:</li>
                          <li><a href="https://www.facebook.com" target="_blank" class="facebook"><i class="fab fa-facebook-f"></i></a></li>
                          <li><a href="https://twitter.com" target="_blank" class="twitter"><i class="fab fa-twitter"></i></a></li>
                          <li><a href="https://www.instagram.com" target="_blank" class="instagram"><i class="fab fa-instagram"></i></a></li>
                          <li><a href="https://www.linkedin.com" target="_blank" class="linkedin"><i class="fab fa-linkedin-in"></i></a></li>
                      </ul>
                </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
                <div class="footer-content py-3">
                    <h2>Our vision</h2>
                    <p>At Agrofarm, we are committed to transforming agriculture through knowledge, innovation, and sustainability. Founded with a deep respect for the land and those who cultivate it, our mission is to support farmers and agri-businesses with modern solutions that increase productivity while preserving our natural resources.</p>
                    <p>We believe that agriculture is not just a business; itâ€™s a way of life. Our vision is to build a food-secure future where innovation meets tradition, and where every farmer has the tools they need to succeed.</p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="footer-content py-3">
                    <h2>our Support links</h2>
                      <ul>
                          <li><a href="#">Privacy Policy</a></li>
                          <li><a href="#">Terms of Service</a></li>
                          <li><a href="#">Agriculturists</a></li>
                          <li><a href="#">Farmer</a></li>
                          <li><a href="#">Contact us</a></li>
                          <li><a href="#">FAQ</a></li>
                      </ul> 
                </div>
            </div>

            <div class="col-md-4">
                <div class="footer-content py-3">
                    <h2>our Support links</h2>
                     <h5>Phone</h5>
                      <h5 class="phone-number-text mt-2"><a href="tel:+1211127368">+1 (21) 112 7368</a></h5>
                      <h5>E-mail</h5>
                      <h5 class="email-cont-text mt-1"><a href="mailto:Agrowfarm@mail.com" class="mail">Agrofarm@mail.com</a></h5>
                </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="copyright ">
                  <p >Â© 2025 Agricultural Decision Support System <a  href="#">Agrow<span class="sub-color">farm</span></a></p>
              </div>
            </div>
          </div>
      </div>
</footer>
 


<script>
document.addEventListener("DOMContentLoaded", function () {
  const orderSummary = document.querySelector(".order-summary");
  const paymentDetails = document.getElementById("payment-details");
  const finalTotal = localStorage.getItem("finalTotal") || "0.00";

  // Display stored order summary
  const checkoutItems = JSON.parse(localStorage.getItem("checkoutItems")) || [];
  const cartTotals = JSON.parse(localStorage.getItem("cartTotals")) || {};

  if (checkoutItems.length > 0) {
    checkoutItems.forEach(product => {
      const summaryItem = document.createElement("div");
      summaryItem.classList.add("summary-item");
      summaryItem.innerHTML = `
        <span>${product.productName} (${product.quantity} ${product.priceUnit})</span>
        <span>${product.quantity} Ã— â‚¹${product.price} = â‚¹${(product.quantity * parseFloat(product.price)).toFixed(2)}</span>
      `;
      orderSummary.appendChild(summaryItem);
    });

    orderSummary.innerHTML += `
      <div class="summary-item"><strong>Subtotal:</strong> â‚¹${cartTotals.subtotal || "0.00"}</div>
      <div class="summary-item"><strong>GST (18%):</strong> â‚¹${cartTotals.gst || "0.00"}</div>
      <div class="summary-item"><strong>Transport:</strong> â‚¹${cartTotals.transport || "0.00"}</div>
      <div class="summary-item total"><strong>Total:</strong> â‚¹${cartTotals.finalTotal || "0.00"}</div>
    `;
  } else {
    orderSummary.innerHTML = "<p>No items in checkout.</p>";
  }

  // Handle payment method changes
  document.getElementById("paymentMethod").addEventListener("change", function () {
    const paymentType = this.value;
    paymentDetails.innerHTML = "";

    if (paymentType === "credit" || paymentType === "debit") {
      paymentDetails.innerHTML = `
        <div class="payment-row">
          <div class="form-group">
            <label for="cardNumber">Card Number *</label>
            <input type="text" id="cardNumber" placeholder="16-digit card number" pattern="\\d{16}" required>
          </div>
          <div class="form-group">
            <label for="cardName">Name on Card *</label>
            <input type="text" id="cardName" placeholder="Priyanathan V" required>
          </div>
        </div>
        <div class="payment-row">
          <div class="form-group">
            <label for="expiry">Expiry Date *</label>
            <input type="month" id="expiry" required>
          </div>
          <div class="form-group">
            <label for="cvv">CVV *</label>
            <input type="password" id="cvv" pattern="\\d{3}" placeholder="123" required>
          </div>
        </div>
      `;
    } else if (paymentType === "upi") {
      paymentDetails.innerHTML = `
        <div class="form-group">
          <label for="upiId">Enter UPI ID *</label>
          <input type="text" id="upiId" placeholder="example@upi" required>
        </div>
      `;
    } else if (paymentType === "netbanking") {
      paymentDetails.innerHTML = `
        <div class="form-group">
          <label for="bankName">Select Your Bank *</label>
          <select id="bankName" required>
            <option value="">--Choose Bank--</option>
            <option value="SBI">State Bank of India</option>
            <option value="HDFC">HDFC Bank</option>
          </select>
        </div>
      `;
    } else if (paymentType === "cod") {
      paymentDetails.innerHTML = `
        <div class="form-group">
          <p><strong>Cash on Delivery</strong> selected. Youâ€™ll pay at the time of delivery.</p>
        </div>
      `;
    }
  });

  // Final submit (with order saving logic)
  document.getElementById("secureCheckoutForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const orderId = Math.floor(Math.random() * 9000) + 1000;
    const orderDate = new Date();
    const formattedOrderDate = orderDate.toLocaleDateString("en-GB", {
      day: '2-digit', month: 'short', year: 'numeric'
    });

    const daysToAdd = Math.floor(Math.random() * 7) + 1;
    const deliveryDate = new Date(orderDate);
    deliveryDate.setDate(orderDate.getDate() + daysToAdd);
    const formattedDeliveryDate = deliveryDate.toLocaleDateString("en-GB", {
      day: '2-digit', month: 'short', year: 'numeric'
    });

    const newOrder = {
      orderId: `#${orderId}`,
      orderDate: formattedOrderDate,
      status: "Pending",
      products: checkoutItems.map(item => `${item.productName} (${item.quantity} ${item.priceUnit})`),
      total: cartTotals.finalTotal || "0.00",
      expectedDelivery: formattedDeliveryDate
    };

    const orders = JSON.parse(localStorage.getItem("orders")) || [];
    orders.push(newOrder);
    localStorage.setItem("orders", JSON.stringify(orders));

    alert("Payment processed successfully! âœ…");
    window.location.href = "order.html";
  });
});
</script>
</body>
</html>
